'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _reflect=require('core-js/fn/reflect'),_reflect2=_interopRequireDefault(_reflect),_toSlugCase=require('to-slug-case'),_toSlugCase2=_interopRequireDefault(_toSlugCase),_blackList=require('./black-list.js'),_blackList2=_interopRequireDefault(_blackList),_whiteList=require('./white-list.js'),_whiteList2=_interopRequireDefault(_whiteList),_deepmerge=require('deepmerge'),_deepmerge2=_interopRequireDefault(_deepmerge);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}exports.default=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=require('./modules.js');return d.configExtends(b).namespaces.reduce(function(e,f){return!1===_reflect2.default.has(e,f)&&(e[f]={}),!1===_reflect2.default.has(e[f],'plugins')&&(e[f].plugins={}),_reflect2.default.has(d.pkg,f)&&Object.keys((0,_deepmerge2.default)(d.pkg[f],d.pkg[f].plugins||{})).filter(function(g){return'plugins'!==g}).forEach(function(g){var h=d.find(g,f);if(h&&_reflect2.default.has(e[f],'plugins')&&_reflect2.default.has(e[f].plugins,h))return void(e[f].plugins[h]=(0,_deepmerge2.default)(e[f].plugins[h],d.pkg[f][g]||d.pkg[f].plugins[g]||{}));if(h&&!1===_reflect2.default.has(e[f].plugins,h))return void(e[f].plugins[h]=d.pkg[f][g]||d.pkg[f].plugins[g]||{});if(void 0===h&&-1!==d.namespaces.indexOf(f)&&-1!==d.list.indexOf(g)&&-1!==_whiteList2.default[f].indexOf(g))return void(e[f].plugins=(0,_deepmerge2.default)(e[f].plugins,{[g]:d.pkg[f][g]||d.pkg[f].plugins[g]||{}}));if(void 0===h&&-1!==d.list.indexOf(g)&&!1==(-1!==_whiteList2.default[f].indexOf(g)))return void(e[f].plugins[g]=d.pkg[f][g]||{});if(void 0===h&&-1===d.list.indexOf(g)&&(!_reflect2.default.has(_whiteList2.default,f)||_reflect2.default.has(_whiteList2.default,f)&&_reflect2.default.has(_whiteList2.default[f],'property'))&&_reflect2.default.has(d.pkg[f],'plugins')&&_reflect2.default.has(d.pkg[f].plugins,g)){var i=g;return _reflect2.default.has(d.pkg,f)&&_reflect2.default.has(d.pkg[f],'plugins')&&_reflect2.default.has(d.pkg[f].plugins,g)&&-1===g.indexOf(f)&&void 0===d.find(g,f)&&(i=(0,_toSlugCase2.default)(`${f} ${g}`)),void(e[f].plugins=(0,_deepmerge2.default)(e[f].plugins,{[i]:d.pkg[f][g]||d.pkg[f].plugins[g]||{}}))}void 0!==h||-1!==d.list.indexOf(g)||_reflect2.default.has(d.pkg[f],'plugins')&&(!_reflect2.default.has(d.pkg[f],'plugins')||_reflect2.default.has(d.pkg[f].plugins,g))||(e[f][g]='boolean'==typeof d.pkg[f][g]?d.pkg[f][g]:d.pkg[f][g]||{})}),d.list.filter(function(g){return(g.substr(0,f.length)===f||_reflect2.default.has(_whiteList2.default,f)&&-1!==_whiteList2.default[f].indexOf(g))&&g!==f}).forEach(function(g){return -1===_blackList2.default.indexOf(g)?Array.isArray(e[f].plugins)&&!1==(-1!==e[f].plugins.indexOf(g))?void e[f].plugins.push(g):void(!1===Array.isArray(e[f].plugins)&&'object'==typeof e[f].plugins&&!1===_reflect2.default.has(e[f].plugins,g)&&(e[f].plugins[g]={})):void 0}),e},{})},module.exports=exports['default'];